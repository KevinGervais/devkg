###  3 branches for the git repository
- master
	- lastest version of codebase
- deploy
	- deployment of website and server on every push to the branch on github
- release
	- makes a build for android on every push to the branch on github

### repository folder structure
```
kevingervais
|
├── client
│   └── src (contains all the code for the website and the app)
│       ├── api (all about client-server communication)
│       ├── classes (reusable classes used in client)
│       ├── components (reusable react components used in client)
│       ├── constants (reusable constants used in client)
│       ├── localStorage (methodes to interact with localStorage)
│       ├── popups (reusable popups opened/closed with redux)
│       ├── pages (all pages of the application)
│       ├── redux (all reusable methods for redux, store and model)
│       └── routes (reusable routes components and a router that redirect to the good page depending of the url path)
├── server
│   └── src (contains all the code that runs on server-side)
│       ├── classes (reusable classes used in server)
│       ├── emails (emails methods and templates)
│       ├── routines (all routines are there)
│       ├── schemas (reusable schemas definitions for request data validation)
│       └── requests (all requests are declared here)
│           ├── promotions
|           ├── ...
|           └── commerces
│               ├── getOne
│               ├── createOne
│               ├── updateOne
│               └── index.ts

├── shared
│   └── src (contains all the code that is shared between 
│       ├── classes (reusable classes for client and server)
│       ├── constants (reusable constants for client and server)
│       ├── functions (reusable functions for client and server)
│       ├── languages
│       │   ├── en.ts (all english definitions)
│       │   └── fr.ts (all french definitions)
│       └── requests (all types definitions for every request)
│           ├── promotions.ts
│           ├── commerces.ts
│           │   ...
└── mobile (contains almost only autogenerated files)
	└── package.json (should be the only file to change on mobile)

```

### Common commands
- init project (before you do anything)
	1. access the repos folder from command line
	2. from command line:  ```yarn init-project```
- to deploy website and server
	1. commit changes in master branch
	2. access the repos folder from command line
	3. from command line:  ```yarn deploy```
- to make a release for android
	1. commit changes in master branch
	2. access the repos folder from command line
	3. from command line:  ```yarn release```
- to make a build for ios on your ios device
	1. access the repos folder from command line
	2. from command line:  ```yarn build-ios```
	3. from xcode on mac
		1. open the project from  ```any-path/kevingervais/mobile/platforms/ios```
		2. click from top bar, ```xcode -> preferences```
		3. go to ```accounts``` tab
		4. add an account with the ```+```button
		5. click ```Apple ID```
		6. enter the kevingervais credentials
		7. close ```preferences```
		8. make sure that in signing and capabilities the checkbox ```automatically manage signing``` is selected and the team is ```DevKG Inc.```
		9. plug your iphone, select ```iphone``` from the device tab
		10. click the play button on top
- to make an ios release to ```app store connect```
	1. make the same steps  ```1.```  to ```3.8 (3. h.)``` from the previous command
	2. select ```any ios device``` from the device tab
	3. click from top bar, ```commerce -> archive```
	4. do ```distribute app -> next -> app store connect -> next -> upload -> next -> next -> automatically manage signing```
- to update version of the app
	1. access the repos folder from command line
	2. from command line (if you want 0.10.0 by example):  ```yarn update-version 0.10.0```
- to run the app locally (web and server only)
	1. access the repos folder from command line
	2. from command line:  ```cd client; yarn start```
	3. open a second tab from command line:  ```yarn start```

### file and folder structure (almost always)
- if there is not a lot of different file types in a folder we can just make it flat like that

```
MyComponent
|
├── MyComponent.tsx
├── MySubComponent.tsx
├── MyOtherSubComponent.tsx
├── myFunction1.ts
├── myFunction2.ts
├── index.ts
├── reducer.ts
└── model.ts
```

- when there are a lot of files in a folder, we just organize files and folder like that

```
├── classes
│   ├── MyClass1.ts (1 class per file)
│   ├── MyClass2.ts
│   └── ...
├── components
│   ├── MyComponent1.tsx (1 component per file)
│   ├── MyComponent2.tsx
│   └── ...
├── constants
│   ├── MY_CONSTANT_1.ts (1 static constant per file)
│   ├── MY_CONSTANT_2.ts
│   └── ...
├── functions
│   ├── myFunction1.ts (1 function per file)
│   ├── myFunction2.ts
│   └── ...
├── index.ts
└── model.ts (every reusable types are here)
```

### Tech used in the project
- for the client folder
	- typescript
	- react
	- redux
	- react-router
	- styled-components  and tailwindcss
	- socket.io

- for the server folder
	- typescript
	- socket.io
	- express.js
	- nodemailer
	- ajv

- react (every component is in react)
	- we try to never use class components and use the ```<Class />```component instead
- redux (use a tweaked version of redux)
	-  ```setReduxState(reducerName, partialReducerState, doneCallback)```
		-  perfect for changing state of only one reducer
	-  ```setReduxState(partialState, doneCallback)```
		-  perfect for changing multiple reducers at the same time
	-  ```getReduxState()``` use it only outside of a react renderer
	-  ```useReduxState()``` perfect for any functionnal component
-  for styling
	- we started the project with ```styled-components```
	- but we moved gradually with ```tailwindcss```
		- more performant
		- faster to write
- for interaction between client and server:
	- we use on the background socket.io and little bit of axios
	- everything is wrapped with 3 reusable functions:
		- handleSocketRequest (client and server) 
		- handleHttpRequest (client and server and only for file download) 
		- handleRequestEvent (only client-side)

### mandatory vscode extensions
- tailwind css intellisense
- tslint deprecated
- lit-html
- vscode-styled-components
- headwind